## Запуск проекта

Так как за окном 18.06.2022 время перемен так сказать :-). Это ветер перемен так же зацепил и проект.
Все зависимости скачиваються из nexus репозитория банка.

```
npm login --registry https://nexus-ci.corp.dev.vtb/repository/fes-npm
вводится login в виде vtbXXXXXXX
после удачной авторизации 
npm i --force
```

В nexus репозитории могут и не быть новых версий зависимостей, поэтому новые зависимости и обновленные версии ограничены только теми пакетами которые находяться в репозитории.

## Локальная разработка

```
откройте браузер в небезопасном режиме
open -na Google\ Chrome --args --user-data-dir=/tmp/temporary-chrome-profile-dir --disable-web-security
 перейдите на адрес проекта localhost:8000
 в консоле разработчка вы обнаружите что запрос авторизации (токен, пользователь и доступы) выдает ошибку, перейдите через network вкладку по клику на неудачный(красный) запрос на страницу запроса,
 вы увидите сообщение о безопасности нажмите enter и введите this is un safe, после этого появиться форма авторизации, нажмите отмена, появиться текст неудачной авторизации SAP,
 закройте сраницу и перейдите отбратно на страницу проекта и перезагрузите её, по идее все должно запуститься :-).
```

## Струтура и общая филосовия проекта
Проект реализован на [Redux Tool Kit](https://redux-toolkit.js.org/), если вы не использовали ранее советую почитать документацию прежде чем работать с проектом,
это поможет вам сэкономить время. Структура папок вполне себе традиционная при использование Redux.
 
В данном проекте реализован подход который ограничивает какую либо логику в самих компонентах, компоненты служат только для отображения.
Eдинтсвенную  логику, которую вы найдете в них это логика отображение компонентов.

В reducers для простоты восприятия кода вся работа с данными (mapping, sorting, filters, computing) перенесена в src/helpers, 
а уже результат всех рассчетов записываеться в state.

Все динамически данные, то есть данные которые меняються при взаимодействии пользователя с интерфейсом рассчитываються в src/selectors,
результат этих рассчетов уже вызываеться в компоненте через useSelectors hooks. **В компонентах нету ни какой логики только отображение!!!**

## Описание потока загрузки данных при входе в приложение.

Как уже говорилось ранее проект организован на [Redux Tool Kit](https://redux-toolkit.js.org/), который позволяет устанавливать функции обратного вызова
для actions, делаеться это с помощью [Listener Middleware instance](https://redux-toolkit.js.org/api/createListenerMiddleware#listener-middleware-instance).

В данном проекте в папке *srс/middlewares/listeners* находяться все middlewares, которые прослушивают ряд actions что бы в свою очередь запустить dispatch(action).

При входе в приложение запускаеться authorization на успех выполения авторизации весить функция обратного вызова, которая запрашивает initReplaceYear 
данный вызов отражает взаимосвязь между пользователем и данным сервисом:
- Соответствует пользователь всем уловиям что бы пользоваться сервисом
- Важно! В этом же запросе приходит message:string, которое указавает были ранее созданные им заявки или нет.
- Приходят значение двух предыдущих годов. (При входе значение этих годов используеться для рассчета компенсации до замены лет).

В случаи успеха initReplaceYear, мы понимаем что пользователь может пользоваться сервисом запрашиваеться справочник (getHelperList)
в нем указаны все отработанные года пользователя, с помощью этих данных рассчитываеться науилучший тариф для пользователя в калькуляторе.

Вы можете представялять процесс в виду цепочки действи:

authorization (success) -> initReplaceYear (success) -> helperList (success) -> .....

По такому же принципу action->middlewareListening->dispatch работает другие обработчики в этом файле.


## Стилизация 

В данном проекте используеться styled component подход, общий компоненты которые служат для общий нужд таких как 
сетка, общие элементы страницы (Заголовки,Блоки,Секции) находяться в src/components/styledComponents. Для тесно связанных 
элементов верстки с компонентами в файле  *name component-parts.ts* в папке компонента.
